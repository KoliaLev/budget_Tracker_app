(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,n){},25:function(e,t,n){e.exports={spending_table:"day_spending_table__3E0oA",animatezoom:"day_animatezoom__3EPVw",my_input:"day_my_input__1nVe0"}},26:function(e,t,n){e.exports={exit:"Navbar_exit__3nTv2"}},35:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(24),r=n.n(s),l=(n(22),n(18)),o=n(3),i=n(6),d=(n(34),n(28)),u=(n(35),n(2)),j=function(e){return console.log(e.date),Object(u.jsx)(d.a,{onChange:e.setDate,value:e.date})},b=n(7),p=n(4),h=n.n(p),O=n(10),x=Object(a.createContext)({token:null,userId:null,email:null,login:function(){},logout:function(){},isAuthenticated:!1}),g=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),r=Object(i.a)(s,2),l=r[0],o=r[1];return{request:Object(a.useCallback)(function(){var e=Object(O.a)(h.a.mark((function e(t){var n,a,s,r,l,i=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"GET",a=i.length>2&&void 0!==i[2]?i[2]:null,s=i.length>3&&void 0!==i[3]?i[3]:{},c(!0),e.prev=4,a&&(a.date&&(a.date.setHours(12),a.date=a.date.toISOString().slice(0,10)),a=JSON.stringify(a),s["Content-Type"]="application/json"),e.next=8,fetch(t,{method:n,body:a,headers:s});case 8:return r=e.sent,e.next=11,r.json();case 11:if(l=e.sent,r.ok){e.next=14;break}throw new Error(l.message||"\u0427\u0442\u043e \u0442\u043e \u043d\u0435 \u0442\u0430\u043a ( \u043c\u0435\u0441 \u0438\u0437 \u0444\u0440\u043e\u043d\u0442\u0430)");case 14:return c(!1),e.abrupt("return",l);case 18:throw e.prev=18,e.t0=e.catch(4),c(!1),o(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),loading:n,error:l,clearError:Object(a.useCallback)((function(){return o(null)}),[])}},m=n(25),f=n.n(m),v=function(e){return Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"grid-example col s4  light-green lighten-4 flow-text",children:e.spend.category}),Object(u.jsxs)("div",{className:"grid-example col s4  light-green lighten-4 flow-text",children:[" ",e.editModeSpend&&e.spend.category===e.updateSpend.category?Object(u.jsx)("input",{autoFocus:!0,onFocus:function(e){return e.target.select()},onChange:e.updateSpendAmountHandler,value:e.updateSpend.amount,type:"text"}):e.spend.amount]}),Object(u.jsxs)("div",{className:"grid-example col s1   flow-text",children:[" ",Object(u.jsx)("button",{onClick:function(){e.delSpend(e.spend)},children:"del"})]}),Object(u.jsx)("div",{className:"grid-example col s3   flow-text",children:e.editModeSpend&&e.spend.category===e.updateSpend.category?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{onClick:function(){return e.setUpdateCategoryhadler(e.spend)},children:"Save"}),Object(u.jsx)("button",{onClick:function(){return e.setEditModeSpend(!1)},children:"Cancel"})]}):Object(u.jsx)("button",{onClick:function(){console.log(e.spend),e.editSpendHandler(e.spend)},children:"edit"})})]},e.spend.category)},w=function(e){return Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"grid-example col s4  light-green lighten-3 flow-text",children:Object(u.jsx)("strong",{children:"Total"})}),Object(u.jsx)("div",{className:"grid-example col s4  light-green lighten-3 flow-text",children:Object(u.jsx)("strong",{children:e.spends.reduce((function(e,t){return e+t.amount}),0)})})]})},y=function(e){var t=Object(a.useContext)(x).token,n=g().request,c=Object(a.useState)({}),s=Object(i.a)(c,2),r=s[0],l=s[1],o=Object(a.useState)(!1),d=Object(i.a)(o,2),j=d[0],p=d[1];Object(a.useEffect)(Object(O.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m();case 1:case"end":return e.stop()}}),e)}))),[e.date]);var m=Object(a.useCallback)(Object(O.a)(h.a.mark((function a(){var c,s;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,(c=e.date).setHours(12),c=c.toISOString().slice(0,10),a.next=6,n("api/create/get?date=".concat(c),"GET",null,{authorization:"Beaer ".concat(t)});case 6:s=a.sent,console.log("\u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b \u0442\u0440\u0430\u0442\u044b ",s),e.setSpends(s),a.next=13;break;case 11:a.prev=11,a.t0=a.catch(0);case 13:case"end":return a.stop()}}),a,null,[[0,11]])}))),[t,n,e.date]),y=Object(a.useCallback)(function(){var a=Object(O.a)(h.a.mark((function a(c){var s,r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("\u0440\u0430\u0431\u043e\u0442\u0430\u043b delSpend"),a.prev=1,a.next=4,n("api/create/delete?id=".concat(c._id),"DELETE",null,{authorization:"Beaer ".concat(t)});case 4:s=a.sent,console.log("\u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e: ",s),r=e.spends.filter((function(e){return e.category!=c.category})),e.setSpends(r),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),console.log("\u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438: ",a.t0);case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}(),[e.spends]),k=Object(a.useCallback)(function(){var a=Object(O.a)(h.a.mark((function a(c){var s;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("\u0440\u0430\u0431\u043e\u0442\u0430\u043b editSpend \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u043c ",c),a.prev=1,a.next=4,n("api/create/edit","PUT",{category:c.category,amount:c.amount,date:e.date},{authorization:"mykola ".concat(t)});case 4:s=a.sent,console.log("\u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e: ",s),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log("\u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u043f\u0434\u0435\u0439\u0442\u0435: ",a.t0);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}(),[e.date]),S=function(e){l(Object(b.a)(Object(b.a)({},r),{},{amount:e.target.value}))},N=function(t){if(t.amount!=r.amount){k(r);var n=e.spends.map((function(e){return e.category===r.category?Object(b.a)(Object(b.a)({},e),{},{amount:+r.amount}):e}));e.setSpends(n)}p(!1)},C=function(e){l({category:e.category,amount:e.amount}),p(!0)};return Object(u.jsxs)("div",{id:f.a.spending_table,children:[Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"grid-example col s4  light-green lighten-3",children:Object(u.jsx)("strong",{children:Object(u.jsx)("span",{className:"flow-text",children:"Category"})})}),Object(u.jsx)("div",{className:"grid-example col s4  light-green lighten-3",children:Object(u.jsx)("strong",{children:Object(u.jsx)("span",{className:"flow-text",children:"Amount"})})})]}),e.spends.map((function(e){return Object(u.jsx)(v,{spend:e,updateSpend:r,editModeSpend:j,setEditModeSpend:p,updateSpendAmountHandler:S,delSpend:y,setUpdateCategoryhadler:N,editSpendHandler:C})})),Object(u.jsx)(w,{spends:e.spends})]})},k=n(26),S=n.n(k),N=function(){var e=Object(o.g)(),t=Object(a.useContext)(x),n=t.email,c=function(n){n.preventDefault(),t.logout(),e.push("/")};return Object(u.jsx)("nav",{children:Object(u.jsxs)("div",{className:"nav-wrapper grey lighten-1",children:[Object(u.jsx)("span",{className:"brand-logo",children:"Budget Tracker"}),Object(u.jsxs)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:[Object(u.jsx)("li",{children:Object(u.jsx)("span",{children:n})}),Object(u.jsx)("li",{children:Object(u.jsx)("a",{href:"collapsible.html",onClick:c,children:"Exit"})})]}),Object(u.jsx)("a",{id:S.a.exit,href:"collapsible.html",onClick:c,children:"Exit"})]})})},C=n(29),E=n(13),_=function(e){var t=Object(a.useContext)(x),n=g().request,c=Object(a.useState)({category:"",amount:""}),s=Object(i.a)(c,2),r=s[0],l=s[1],o=function(e){l(Object(b.a)(Object(b.a)({},r),{},Object(E.a)({},e.target.name,e.target.value)))},d=function(){var a=Object(O.a)(h.a.mark((function a(){var c,s;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!r.amount||!r.category){a.next=11;break}return a.prev=1,a.next=4,n("api/create/add","POST",{category:r.category,amount:r.amount,date:e.date},{authorization:"mykola ".concat(t.token)});case 4:c=a.sent,console.log(c),1===c.statusCode&&(console.log(e.spends),s=e.spends.some((function(e){return e.category===c.spend.category}))?e.spends.map((function(e){return e.category===c.spend.category?Object(b.a)(Object(b.a)({},e),{},{amount:c.spend.amount}):Object(b.a)({},e)})):[].concat(Object(C.a)(e.spends),[c.spend]),e.setSpends(s),l({category:"",amount:""})),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(){return a.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"container ",children:Object(u.jsxs)("div",{className:"card-content white-text",children:[Object(u.jsxs)("div",{className:"input-field",children:[Object(u.jsx)("input",{id:"category",type:"text",className:"validate",name:"category",onChange:o,value:r.category}),Object(u.jsx)("label",{htmlFor:"category",children:"category"})]}),Object(u.jsxs)("div",{className:"input-field",children:[Object(u.jsx)("input",{id:"amount",type:"number",className:"validate",name:"amount",onChange:o,value:r.amount}),Object(u.jsx)("label",{htmlFor:"amount",children:"amount"})]}),Object(u.jsx)("button",{className:"waves-effect waves-light btn col s4 offset-s1",onClick:d,children:"Add"})]})})})},I=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(new Date),r=Object(i.a)(s,2),l=r[0],o=r[1];return console.log(l),Object(u.jsxs)("div",{className:"container ",children:[Object(u.jsx)("div",{className:"row",children:Object(u.jsx)(N,{})}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"grid-example col s12 m6 ",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsx)(j,{date:l,setDate:o})})}),Object(u.jsx)("div",{className:"grid-example col s12 m6 light-green lighten-4 li",children:Object(u.jsx)(_,{spends:n,setSpends:c,date:l})})]}),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"grid-example col s12 grey lighten-5",children:Object(u.jsx)(y,{spends:n,setSpends:c,date:l})})})]})},T=function(){var e=Object(a.useContext)(x),t=Object(a.useCallback)((function(e){window.M&&e&&window.M.toast({html:e,classes:"rounded",outDuration:2e3})}),[]),n=g(),c=n.request,s=n.loading,r=n.error,l=n.clearError,o=Object(a.useState)({email:"",password:""}),d=Object(i.a)(o,2),j=d[0],p=d[1],m=function(e){p(Object(b.a)(Object(b.a)({},j),{},Object(E.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(O.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("/api/auth/register","POST",Object(b.a)({},j));case 3:n=e.sent,t(n.message),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var n=Object(O.a)(h.a.mark((function n(){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c("/api/auth/login","POST",Object(b.a)({},j));case 3:a=n.sent,t(a.message),e.login(a.token,a.userId,a.email),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return Object(a.useEffect)((function(){t(r),l()}),[r,t,l]),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h2",{children:" Budget Tracker"}),Object(u.jsxs)("div",{className:"card grey lighten-2",children:[Object(u.jsxs)("div",{className:"card-content white-text",children:[Object(u.jsx)("span",{className:"card-title grey-text text-darken-3",children:"Authorization "}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"input-field",children:[Object(u.jsx)("input",{id:"email",type:"email",className:"validate",name:"email",onChange:m,value:j.email}),Object(u.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(u.jsxs)("div",{className:"input-field ",children:[Object(u.jsx)("input",{id:"password",type:"password",className:"validate",name:"password",onChange:m,value:j.password}),Object(u.jsx)("label",{htmlFor:"password",children:"Password"})]})]})]}),Object(u.jsx)("div",{className:"card-action ",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("button",{className:"waves-effect waves-light btn col s4 ",disabled:s,onClick:v,children:"Login"}),Object(u.jsx)("button",{className:"waves-effect waves-light btn col s4 offset-s1",onClick:f,disabled:s,children:"Register"})]})})]})]})})},F="userData";var P=function(){var e=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),r=Object(i.a)(s,2),l=r[0],o=r[1],d=Object(a.useState)(null),u=Object(i.a)(d,2),j=u[0],b=u[1],p=Object(a.useCallback)((function(e,t,n){c(e),o(t),b(n),localStorage.setItem(F,JSON.stringify({userId:t,token:e,email:n}))}),[]),h=Object(a.useCallback)((function(){c(null),o(null),b(null),localStorage.removeItem(F)}),[]);return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem(F));e&&e.token&&p(e.token,e.userId,e.email)}),[p]),{login:p,logout:h,token:n,userId:l,email:j}}(),t=e.token,n=e.login,c=e.logout,s=e.userId,r=e.email,d=!!t,j=function(e){return e?Object(u.jsxs)(o.d,{children:[Object(u.jsx)(o.b,{path:"/create",children:Object(u.jsx)(I,{})}),Object(u.jsx)(o.a,{to:"/create"})]}):Object(u.jsxs)(o.d,{children:[Object(u.jsx)(o.b,{path:"/auth",children:Object(u.jsx)(T,{})}),Object(u.jsx)(o.a,{to:"/auth"})]})}(d);return Object(u.jsx)(x.Provider,{value:{token:t,login:n,logout:c,userId:s,email:r,isAuthenticated:d},children:Object(u.jsx)(l.a,{children:Object(u.jsx)("div",{className:"container",children:j})})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};r.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(P,{})}),document.getElementById("root")),A()}},[[45,1,2]]]);
//# sourceMappingURL=main.af3b62f9.chunk.js.map